def next_smaller_elements(arr):
    stack = []
    result = [-1] * len(arr)  

    
    for i in range(len(arr)-1, -1, -1):
        num = arr[i]
        
        while stack and stack[-1] >= num:
            stack.pop()

        
        if stack:
            result[i] = stack[-1]

        
        stack.append(num)

    return result


arr = [4, 10, 5, 8, 20, 15, 3, 12]
print(next_smaller_elements(arr))
